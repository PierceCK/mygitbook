# vi的使用

#### 一般命令模式可用的功能按键说明

| 移动光标的方法         |                                                              |
| ---------------------- | ------------------------------------------------------------ |
| **h**或左箭头键(←)     | 光标向左移动一个字符                                         |
| **j**或下箭头键(↓)     | 光标向下移动一个字符                                         |
| **k**或上箭头键(↑)     | 光标向上移动一个字符                                         |
| **l**或右箭头键(→)     | 光标向右移动一个字符                                         |
| [Ctrl] + [f]           | 屏幕[向下]移动一页, 相当于[Page Down]按键**(常用)**          |
| [Ctrl] + [b]           | 屏幕[向上]移动一页, 相当于[Page Up]按键**(常用)**            |
| [Ctrl] + [d]           | 屏幕[向下]移动半页                                           |
| [Ctrl] + [u]           | 屏幕[向上]移动半页                                           |
| +                      | 光标移动到非空格符的下一行                                   |
| -                      | 光标移动到非空格符的上一行                                   |
| n(数字)[空格键]        | 光标向右移动这一行的n个字符,例如,20[空格键]则光标会向后移动20个字符的距离 |
| 0(数字0)或功能键[Home] | 移动到这一行的最前面字符处**(常用)**                         |
| $或功能键[End]         | 移动到这一行的最后面字符处**(常用)**                         |
| H                      | 光标移动到这个屏幕的最上方那一行的第一个字符                 |
| M                      | 光标移动到这个屏幕的中央那一行的第一个字符                   |
| L                      | 光标移动到这个屏幕的最下方那一行的第一个字符                 |
| G                      | 移动到这个文件的最后一行**(常用)**                           |
| n(数字)G               | 移动到这个文件的第n行, 例如20G则会移动到这个文件的第20行     |
| gg                     | 移动到这个文件的第一行, 相当于1G**(常用)**                   |
| n(数字)[Enter]         | 光标向下移动n行**(常用)**                                    |



| 查找与替换                        |                                                              |
| --------------------------------- | ------------------------------------------------------------ |
| /word                             | 向光标之下寻找一个名称为word的字符串. 例如要在文件内查找vbrid这个字符串, 就输入/vbrid即可.**(常用)** |
| ?word                             | 向光标之上寻找一个名称为word的字符串                         |
| n                                 | n表示[重复前一个查找的操作]. 例如, 如果刚刚我们执行/vbrid去向下查找vbird这个字符串, 则按下n后, 会向下继续查找下一个名称为vbird的字符串. |
| N                                 | 与n正好相反, 表示[反向进行前一个查找操作]. 例如/vbrid后, 按下N则表示向上查找vbrid. |
| :n1(数字),n2(数字)s/word1/word2/g | 在第你n1行与n2行之间寻找word1这个字符串, 并将该字符串替换为word2, 举例来说, 在100到200行之间查找vbrid并替换为VBRID则: ":100,200s/vbrid/VBRID/g"**(常用)** |
| :1,$s/word1/word2/g               | 从第一行到最后一行寻找word1字符串, 并将该字符串替换为word2**(常用)** |
| :1,$s/word1/word2/gc              | 从第一行到最后一行寻找word1字符串, 并将该字符串替换为word2, 且在替换前提示字符给用户确认是否需要替换**(常用)** |



| 删除、复制与粘贴 |                                                              |
| ---------------- | ------------------------------------------------------------ |
| x与X             | 在一行当中, x为向后删除一个字符(相当于[del]按键), X为向前删除一个字符(相当于[Backspace]即退格键).**(常用)** |
| n(数字)x         | 连续向后删除n个字符. 举例来说, 连续删除10个字符, 即[10x]     |
| dd               | 删除(剪切)光标所在的那一整行.**(常用)**                      |
| n(数字)dd        | 删除(剪切)光标所在的向下n行, 例如20dd则是删除(剪切)20行.**(常用)** |
| d1G              | 删除(剪切)光标所在行到第一行的所有数据.                      |
| dG               | 删除(剪切)光标所在行到最后一行的所有数据.                    |
| d$               | 删除(剪切)光标所在处到该行的最后一个字符.                    |
| d0(数字0)        | 删除(剪切)光标所在处到改行的第一个字符.                      |
| yy               | 复制光标所在的那一行.**(常用)**                              |
| n(数字)yy        | 复制光标所在的向下n行, 例如20yy则是复制20行.**(常用)**       |
| y1G              | 复制光标所在行到第一行的所有数据.                            |
| yG               | 复制光标所在行到最后一行的所有数据.                          |
| y0               | 复制光标所在处到该行行首的所有数据.                          |
| y$               | 复制光标所在处到该行行尾的所有数据.                          |
| p与P             | p为将已复制的数据在光标下一行粘贴. P则为粘贴在光标的上一行.  |
| J                | 将光标所在行与下一行的数据结合成一行.                        |
| c                | 重复删除多个数据, 举例来说, 向下删除10行, 即[10cj].          |
| u                | 恢复前一个操作.**(常用)**                                    |
| [Ctrl] + r       | 重做上一个操作.**(常用)**                                    |
| .(小数点)        | 重复前一个操作.**(常用)**                                    |



#### 一般命令模式切换到编辑模式的可用的按键说明

| 进入插入或替换的编辑模式 |                                                              |
| ------------------------ | ------------------------------------------------------------ |
| i与I                     | 进入插入模式: i为[从目前光标所在处插入], I为[在目前所在行的第一个非空格符处开始插入].**(常用)** |
| a与A                     | 进入插入模式: a为[从目前光标所在的下一个字符处开始插入], A为[从光标所在行的最后一个字符处开始插入].**(常用)** |
| o与O                     | 进入插入模式: o为[在目前光标所在的下一行处插入新的一行], O为[在目前光标所在处的上一行插入新的一行].**(常用)** |
| r与R                     | 进入替换模式: r只会替换光标所在的那个字符一次; R会一直替换光标所在的字符, 直到按下Esc为止.**(常用)** |
| [Esc]                    | 退出编辑模式, 回到一般命令模式中.                            |



#### 一般命令模式切换到命令行模式的可用按键说明

| 命令行模式的保存、退出等命令    |                                                              |
| ------------------------------- | ------------------------------------------------------------ |
| :w                              | 将编辑的数据写入到硬盘文件中.**(常用)**                      |
| :w!                             | 若文件属性为[只读]时, 强制写入该文件. 不过, 到底能不能写入, 还是跟你对该文件的文件权限有关. |
| :q                              | 退出vi.**(常用)**                                            |
| :q!                             | 若曾修改过文件, 又不想保存, 使用!为强制退出不保存.           |
| :wq                             | 保存后退出, 若为:wq!则为强制保存后退出.**(常用)**            |
| ZZ                              | 若文件没有修改, 则不保存退出, 若文件已经被修改, 则保存后退出 |
| :w [filename]                   | 将编辑的数据保存成另一个文件(类似另存新文件).                |
| :r [filename]                   | 在编辑的数据中, 读入另一个文件的数据, 亦即将[filename]这个文件内容加到光标所在行后面. |
| :n1(数字),n2(数字) w [filename] | 将n1行到n2行的内容保存为filename这个文件.                    |
| :! [command]                    | 暂时退出vi到命令行模式下执行command的显示结果. 例如, [:! ls /home]即可在vi当中查看/home下面以ls输出的文件信息 |
| :set nu                         | 显示行号, 设置之后, 会在每一行的前缀显示该行的行号.          |
| :set nonu                       | 与set nu相反, 为取消行号.                                    |