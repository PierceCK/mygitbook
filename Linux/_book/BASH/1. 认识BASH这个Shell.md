# 认识BASH这个Shell

#### 硬件、内核与Shell

- 我们必须要通过Shell将我们输入的命令与(kernel)沟通, 好让内核可以控制硬件来正确无误地工作.
- 我们发现应用程序在操作系统图例的最外层, 就如同鸡蛋的外壳一样, 因此这个东西也被称为壳程序(Shell).
  - 也就是说,, 只要能够操作应用程序的软件都能够被称为 **壳程序**.
  - 狭义的Shell: 值得是命令行方面的软件, 就如bash.
  - 广义的Shell: 则包括图形用户界面模式的软件, 因为图形用户界面模式其实也能够操作各种应用程序来调用内核工作.



#### 为何要学命令行模式的Shell？

- 几乎各家Linux发行版使用的bash都是一样的.
- 联机时命令行模式的传输速度一定比较快, 而且不容易出现掉线或是信息外流的问题.
- 如何想要将主机管理的好, 那么良好的shell程序编写是一定需要的.



#### 系统的合法shell与 /etc/shells功能

- Linux使用的shell版本被称为 **Bourne Again SHell(简称bash)**
  - 这个shell是Bourne shell(sh)的增强版本
- Linux可以使用的shell版本放在 **/etc/shells** 这个文件里, 至少就有下面几个可用的shells
  - /bin/sh (已经被 /bin/bash 所替换)
  - /bin/bash (Linux默认的shell)
  - /bin/tcsh (整合C Shell, 提供更多的功能)
  - /bin/csh (已经被 /bin/tcsh 所替换)
- 为什么我们系统上合法的shell要写入 /etc/shells 这个文件？
  - 因为系统某些服务在运行过程中, 会去检查用户能够使用的shells, 而这些shell的查询就是借由 /etc/shells 这个文件.
- 用户什么时候可以取得shell来工作？还有, 我这个用户默认会取得哪一个shell？
  - 当用户登录时, 系统就会给用户一个shell让用户来工作, 而这个登录取得的shell就记录在 /etc/passwd 这个文件内.
    - 用户默认取得的shell记录于 etc/passwd 的最后一个字段.

​	

#### Bash shell 的功能

- 历史命令
  - bash能记录使用过的命令, 在命令行使用↑↓键就可以找到前后一个输入的命令.
  - ~/.bash_history记录的是 **前一次登录** 以前所执行过的命令, **这一次登录** 所执行的命令都被缓存在内存中.
    - 当用户成功的注销系统后, 这一次登录所执行的命令才会被记录到.bash_history当中.
    - 默认的命令记录条目可以到达1000个
- 命令与文件补全功能( **[Tab] 按键** )
  - [Tab] 接在一串命令的 **第一个字** 的后面, 则为 **命令补全**
  - [Tab] 接在一串命令的 **第二个字** 的后面, 则为 **文件补齐**
- 命令别名设置功能 ( **alias** )
  - 命令行输入 alias 就可以知道目前的命令别名有哪些
  - 直接执行命令来设置别名, 如: alias lm='ls -al', 即输入"lm" 等于 输入"ls -al".
- 任务管理、前台、后台控制
- 程序化脚本
- 通配符



#### type : 查询命令是否为Bash shell的内置命令

- type [-tpa] name

| 选项与参数 | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
|            | 不加任何选项与参数时, type会显示出name是外部命令还是bash内置命令 |
| -t         | type将name以下面这些字眼显示出它的意义:<br />file : 表示为外部命令<br />alias : 表示该命令为命令别名所设置的名称<br />builtin : 表示该命令为bash内置的命令功能 |
| -p         | 只有name为外部命令时, 才会显示完整文件名                     |
| -a         | 会从PATH变量定义的路径中, 将所有含name的命令都列出来, 包括alias |



#### 命令执行与快速编辑按钮

- 如果命令串太长想多行输入, 可以将 [Enter] 转义后, 换行继续输入

  - [ **\\[Enter]** ], 使用反斜杠(\\)转义[Enter]这个按键, 让[Enter]不再具有开始执行的功能
  - 注意: [Enter]是紧接着反斜杠(\\)的, 两者中间没有其他字符
    - 因为 \\ 仅转移紧接着的下一个字符
  - 顺利转义[Enter]后, 下一行最前面会 **自动 ** 出现 **>** 的符号, 你就可以继续输入命令了.

- 快速编辑按钮


| 组合键                     | 功能与示范                                                   |
| -------------------------- | ------------------------------------------------------------ |
| [Ctrl] + u<br />[Ctrl] + k | 从光标处向前删除命令串<br />从光标处向后删除命令串           |
| [Ctrl] + a<br />[Ctrl] + e | 让光标移动到整个命令串的最前面<br />让光标移动到整个命令串的最后面 |





