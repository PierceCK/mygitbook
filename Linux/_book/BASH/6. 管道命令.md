# 管道命令 ( pipe )

#### \| : 界定符号

- 管道命令使用的是 [ \| ] 这个界定符号.
- [ \| ] 仅能处理经由前面一个命令传来的正确信息, 也就是标准输出的信息, 但是对于标准错误并没有直接处理的能力.
- 在每个管道后面接的第一个数据必定是 [ 命令 ], 而且这个命令必须要能够接受标准输入的数据才行, 这样的命令才可为管道命令.
  - 管道命令仅会处理标准输出, 对于标准错误会予以忽略.
  - 管道命令必须要能够接受来自前一个命令的数据成为标准输入继续处理才行.



#### 选取命令: cut、grep

- 选取信息通常是针对 [ 一行一行 ] 来分析的, 并不是整篇信息分析.

- cut

  - cut 处理的信息时以 [ 行 ] 为单位

  - cut 的主要用途在于将同一行里面的数据进行分解

  - cut -d '分割字符' -f fields    <== 用于有特定分隔字符
    cut -c 字符区间     <== 用于排列整齐的信息

| 选项与参数 | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| -d         | 后面接分隔字符, 与 -f 一起使用                               |
| -f         | 根据 -d 的分隔字符将一段信息划分成为数段, 用 -f 取出第几段的意思 |
| -c         | 以字符的单位取出固定字符区间                                 |



- grep

  - grep是分析一行信息, 若当中有我们所需要的信息, 就将该行拿出来

  - grep [ -acinv ] [ --color=auto ] '查找字符' filename

| 选项与参数   | 说明                                                         |
| ------------ | ------------------------------------------------------------ |
| -a           | 将二进制文件以文本文件的方式查找数据                         |
| -c           | 计算找到 '查找字符' 的次数                                   |
| -i           | 忽略大小写的不同, 所以大小写视为相同                         |
| -n           | 顺便输出行号                                                 |
| -v           | 反向选择, 亦即显示出没有 '查找字符' 内容的那一行             |
| --color=auto | 可以将找到的关键字部分加上颜色的显示, 默认的grep已经主动使用 --color=auto 选项在 alias 中了. |



#### 排序命令: sort、wc、uniq

- sort

  - sort 可以帮助我们进行排序, 而且可以根据不同的数据形式来排序.

  - sort [ -fbMnrtuk ] [ file or stdin ]

| 选项与参数 | 说明                                                    |
| ---------- | ------------------------------------------------------- |
| -f         | 忽略大小写的差异, 例如A与a视为编码相同                  |
| -b         | 忽略最前面的空格字符部分                                |
| -M         | 以月份的名字来排序, 例如JAN、DEC等的排序方法            |
| -n         | 使用 [ 纯数字 ] 进行排序 ( 默认是以文本形式来进行排序 ) |
| -r         | 反向排序                                                |
| -u         | uniq, 相同的数据中, 仅出现一行代表                      |
| -t         | 分隔符号, 默认使用 [ Tab ] 键来分隔                     |
| -k         | 以哪个区间 ( field ) 来进行排序的意思                   |



- uniq

  - 排序完成后, 想要将重复的数据仅列出一个显示, 可以使用uniq.

  - uniq 用来将重复的行删掉只显示一个.

  - uniq [ -ic ]

| 选项与参数 | 说明                 |
| ---------- | -------------------- |
| -i         | 忽略大小写字符的不同 |
| -c         | 进行计数             |



- wc

  - wc 可以帮我们计算输出信息的整体数据

  - wc [ -lwm ]

| 选项与参数 | 说明                         |
| ---------- | ---------------------------- |
|            | 默认输出[ 行、字数、字符数 ] |
| -l         | 仅列出行                     |
| -w         | 仅列出多少字 ( 英文字母 )    |
| -m         | 多少字符                     |



#### 双向重定向: tee

- tee
  - tee 会同时将数据流分送到文件与屏幕

  - tee [ -a ] file

| 选项与参数 | 说明                             |
| ---------- | -------------------------------- |
| -a         | 以累加的方式, 将数据加入file当中 |



#### 字符转换命令: tr、col、join、paste、expand

- tr

  - tr 可以用来删除一段信息当中的文字, 或是进行文字信息的替换

  - tr [ -ds ] SET1 ...

| 选项与参数 | 说明                         |
| ---------- | ---------------------------- |
| -d         | 删除信息当中的 SET1 这个字符 |
| -s         | 替换掉重复的字符             |



- col

  - col 可以用来简单地处理将 [ Tab ] 按键替换成为空格键

  - col [ -xb ]

| 选项与参数 | 说明                            |
| ---------- | ------------------------------- |
| -x         | 将 [ Tab ] 键转换成对等的空格键 |



- join

  - join 主要是在处理 [ 两个文件当中, 有相同数据的那一行, 才将它加在一起 ] 的意思.

  - 注意: 在使用 join 之前, 你所需要处理的文件应该事先经过排序处理, 否则有些比对的项目会被忽略.

  - join [ -ti12 ] file1 file2

| 选项与参数  | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| -t          | join 默认以空格字符分隔数据, 并且比对 [ 第一个栏位 ] 的数据, 如果两个文件相同, 则将两条数据连成一行, 且第一个栏位放在第一个. |
| -i          | 忽略大小写的差异.                                            |
| -1( 数字1 ) | 代表 [ 第一个文件要用哪个栏位来分析 ] 的意思.                |
| -2          | 代表 [ 第二个文件要用哪个栏位来分析 ] 的意思.                |



- paste

  - paste 就是直接将两行贴在一起, 且中间以 [ Tab ] 键隔开.

  - paste [ -d ] file1 file2

| 选项与参数 | 说明                                         |
| ---------- | -------------------------------------------- |
| -d         | 后面可以接分隔符, 默认是以 [ Tab ] 键来分离. |



- expand

  - expand 就是将 [ Tab ] 键转成空格键

  - expand [ -t ] file

| 选项与参数 | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| -t         | 后面可接数字, 一般来说一个 [ Tab ] 键可以用8个空格键替换, 我们也可自行定义一个 [ Tab ] 键代表多少个字符. |



#### 划分命令: split

- split
  - split 可以帮你将一个大文件, 依据文件大小或行数进行划分, 即可以将大文件划分成为小文件.

  - split [ -bl ] file PREFIX

| 选项与参数 | 说明                                                |
| ---------- | --------------------------------------------------- |
| -b         | 后面可接欲划分成的文件大小, 可加单位, 例如b、k、m等 |
| -l         | 以行数来进行划分                                    |
| PREFIX     | 代表前缀字符的意思, 可作为划分文件的前缀文字        |



#### 参数代换: xargs

- xargs

  - xargs 就是在产生某个命令的参数的意思

  - xargs 可以读入 stdin 的数据, 并且以空格符或换行符作为标识符, 将stdin的数据分隔成为参数

  - 要使用 xargs 的原因是, 很多命令其实并不支持管道命令, 因此我们可以通过 xargs 来提供该命令使用的 标准输入.

  - xargs [ -0epn ] command

    - 当 xargs 后面没有接任何命令时, 默认以 echo 来进行输出.

| 选项与参数 | 说明                                                         |
| ---------- | ------------------------------------------------------------ |
| -0(数字0)  | 如果输入的 stdin 含有特殊字符, 例如 ` 、 \ 、空格等字符时, 这个 -0 参数可以将它还原成一般字符, 这个参数可以用于特殊状态. |
| -e         | 这是 EOF ( End of file ) 的意思, 后面可以接一个字符, 当 xargs 分析到这个字符时, 就会停止工作 |
| -p         | 在执行每个命令时, 都会询问使用者的意思                       |
| -n         | 后面接次数, 每次 command 命令执行时, 要使用几个参数的意思    |



#### 关于减号 [ - ] 的用途

- 在管道命令当中, 常常会用到前一个命令的 stdout 作为这次的 stdin, 某些命令需要用到文件名来处理时, 该 stdin 与 stdout 可以利用减号 " - " 来替代.
  - 例如: tar -cvf - /home | tar -xvf - -C /tmp/homeback    <== 将/home里面的文件进行打包, 但打包的数据不是记录到文件, 而是传送到stdout, 经过管道后, 将 tar -cvf - /home 传送给后面的 tar -xvf -. 后面的这个 " - " 则是使用前一个命令的 stdout, 因此, 我们就不需要使用文件名了.

