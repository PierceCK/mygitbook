# 什么是shell脚本

- shell脚本 ( shell script, 程序化脚本)
  - shell 脚本是利用 shell 的功能所写的一个程序. 这个程序是使用纯文本文件, 将一些 shell 的语法与命令 ( 含外部命令 ) 写在里面, 搭配正则表达式、管道命令与数据流重定向等功能, 以达到我们所想要的处理目的.
  - shell 脚本也提供了数组、循环、条件与逻辑判断等重要功能.
  - shell 脚本可以简单地被看成是批处理文件, 也可以说成是一个程序语言, 且这个程序语言由于都是利用 shell 与相关工具命令, 所以不需要编译即可运行.

#### 为什么要学习 shell 脚本

- 自动化管理的重要根据
- 跟踪与管理系统的重要工作
- 简单入侵检测功能
- 连续命令单一化
  - 脚本最简单的功能就是: 集合一些在命令行的连续命令, 将它写入脚本文件当中, 而由直接执行脚本来启动一连串的命令行命令输入.
- 简易的数据处理
- 跨平台支持与学习历程较短

#### 第一个脚本的编写与执行

- 注意事项:
  1. 命令是从上而下的、从左而右地分析与执行
  2. 命令的执行: 命令、选项与参数间的多个空格都会被忽略掉
  3. 空白行也将被忽略掉, 并且 [ Tab ] 按键所产生的空白同样视为空格键
  4. 如果读取到一个 Enter 符号( CR ), 就尝试开始执行该行( 或该串 ) 命令
  5. 如果一行的内容太多, 则可以使用 [ \\[Enter] ] 来扩展至下一行
  6. [ # ] 可做为注释, 任何加在 # 后面的数据将全部被视为注释文字而被忽略掉
- 执行脚本: 执行文件名是 /home/dmtsai/shell.sh 的脚本
  - 直接命令执行: shell.sh 文件必须要具备可读与可执行 ( rx ) 的权限, 然后:
    - 绝对路径: 使用 /home/dmtsai/shell.sh 来执行命令
    - 相对路径: 假设工作目录在 /home/dmtsai/, 则使用 ./shell.sh 来执行
  - 变量 [ PATH ] 功能: 将 shell.sh 放在 PATH 指定的目录内, 例如: ~/bin/, 然后:
    - 以 bash 程序来执行: 通过 [ bash shell.sh ] 或 [ sh shell.sh ] 来执行
- 编写第一个程序
  - 第一行 #!/bin/bash 在声明这个脚本使用的 shell 名称
    - 以 [ #! ] 开头的行被称为 shebang 行. 当这个程序被执行时, 它就能够加载 bash 的相关环境配置文件.
    - 如果没有设置好这一行, 那么该程序很可能会无法执行.
  - 程序内容的说明
    - 除了 [ #! ] 是用来声明 shell 的之外, 其他的 # 都是 [ 注释 ] 用途.
    - 建议养成习惯, 说明脚本:
      1. 内容与功能
      2. 版本信息
      3. 作者与联络方式
      4. 建文件日期
      5. 历史记录等
  - 主要环境变量的声明
  - 主要程序部分
  - 执行结果告知 ( 定义返回值 )
    - 我们可以利用 exit 这个命令来让程序中断, 并且返回一个数值给系统.
      - 如: exit 0. 代表退出脚本并返回一个 0 给系统.
    - 利用 exit n ( n是数字 ) 这个功能, 我们可以自定义错误信息.

#### 建立 shell 脚本的良好编写习惯

- 在每个脚本的文件头处记录好:
  - 脚本的功能
  - 脚本的版本信息
  - 脚本的作者与联络方式
  - 脚本的版权声明方式
  - 脚本的 History ( 历史记录 )
  - 脚本内较特殊的命令, 使用 [ 绝对路径 ] 的方式来执行
  - 脚本运行时需要的环境变量预先声明与设置

